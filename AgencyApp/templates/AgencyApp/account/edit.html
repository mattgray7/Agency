{% extends "base.html" %}

{% block content %}
	{% if errors %}
		<ul>
			{% for error in errors %}
				<li>{{ error }}</li>
			{% endfor %}
		</ul>
	{% endif %}

	{% if next == possibleDestinations.interests %}
		<script>

		var chosenProfessionList = []

		function getSquareButtonColumn(label, onclickString){
			return ('<td onclick="' + onclickString + '"><div class="squareButton"><h1><br><br><br>' + label + '<br><br><br><br></h1></div></td>');
		}

		function toggleProfession(profession){
			var professionCheckbox = document.getElementById(profession + "_checkbox");
			var professionRowID = profession + "_rowID";
			if(professionCheckbox != null){
				if(professionCheckbox.checked){
					professionCheckbox.checked = null;
					removeProfession(profession, professionRowID)
				}else{
					professionCheckbox.checked = "checked";
					addProfession(profession, professionRowID)
				}
			}
		}

		function addProfession(profession, professionRowID){
			var table = document.getElementById("chosenProfessionTable");
			if(table != null && chosenProfessionList.indexOf(profession) < 0){
				chosenProfessionList.push(profession);
				var newProfessionRow = table.insertRow(-1);
				newProfessionRow.id = professionRowID;
				var newProfessionCell = newProfessionRow.insertCell(0);
				newProfessionCell.className = "professionsSelectColumn"
				newProfessionCell.innerHTML = "<a> " + profession + "</a><a onclick='toggleProfession(" + '"' + profession + '");' + "' style='float:right; margin: 0px 5px 0px 0px;' /> X</a>";
			}
		}

		function removeProfession(profession, professionRowID){
			var professionIndex = chosenProfessionList.indexOf(profession);
			if(professionIndex >= 0){
				chosenProfessionList.splice(professionIndex, 1);		// Second argument is # of elements to cutout
				var professionRow = document.getElementById(professionRowID);
    			professionRow.parentNode.removeChild(professionRow);
			}
		}

		function filterProfessions(key){
			var professionChoiceDiv = document.getElementById("professionChoicePanel")
			if(professionChoiceDiv != null){
				{% if professions %}
					var professionListString = "<table class='professionsSelectList'>";
					var professions = {{ professions|safe }};
					for(var i=0; i < professions[key].length; i++){
						professionListString += "<tr><td class='professionsSelectColumn' onclick='toggleProfession(" + '"' + professions[key][i] + '");' + "'><a> " + professions[key][i] + "</a><input type='checkbox' id='" + professions[key][i] + "_checkbox' value='false' style='float:right; margin: 8px 5px 0px 0px;' /></td></tr>";
					}
					professionListString += "</table>";
					document.getElementById("professionChoiceSubPanel").innerHTML = professionListString;
				{% endif %}
			}
		}
		</script>

		<div id="workInterestDiv" style="display:none;">
			<h2>What kind of jobs are you looking for?</h2>
			<div id="wrapper">
				<table id="workInterestPanel">
					<tr>
						<td colspan="3"><center> <h3 style="color:#000;">Select your interested professions</h3></center></td>
					</tr>
					<tr>
						<td>
							<table class="squareButtonTable">
								<thead>
								</thead>
								<tr>
									<script>
									document.write(getSquareButtonColumn("Acting &amp; Performing", "filterProfessions('acting');"));
									document.write(getSquareButtonColumn("Creative Positions", "filterProfessions('creative');"));
									</script>
								</tr>
								<tr>
									<script>
									document.write(getSquareButtonColumn("Production - On set", "filterProfessions('onSetProduction');"));
									document.write(getSquareButtonColumn("Production - Off set", "filterProfessions('offSetProduction');"));
									</script>
								</tr>
								<tr>
									<script>
									document.write(getSquareButtonColumn("Pre Production", "filterProfessions('preProduction');"));
									document.write(getSquareButtonColumn("Post Production", "filterProfessions('postProduction');"));
									</script>
								</tr>
							</table>
						</td>
						<td>
							<div id="professionChoicePanel" class="profession3ColumnsFullPanel">
								<div id="professionChoiceSubPanel" class="profession3ColumnsFullPanel_1"></div>
							</div>
						</td>
						<td>
							<div id="chosenProfessionChoicePanel" class="profession3ColumnsFullPanel">
								<div id="chosenProfessionChoiceSubPanel" class="profession3ColumnsFullPanel_1">
									<table id="chosenProfessionTable" class="professionsSelectList">
									</table>
								</div>
							</div>
						</td>

					</tr>
				</table>
			</div>
		</div>
		<script>


		function selectWorkInterest(){
			document.getElementById("interestsDiv").innerHTML = "";
			document.getElementById("workInterestDiv").style.display = "block";
			filterProfessions("acting");
		}

		function selectHireInterest(){
			console.log("hire selected");
		}

		function selectOtherInterest(){
			console.log("other selected");
		}

		</script>
		<div id="interestsDiv">
			<div id="wrapper" width="700px;">
				<div id="three-column" class="container">
					<div class="title">
						<h2>What are your interests?</h2>
						<span class="byline">Specify what you are looking for.</span>
					</div>
					<div class="boxA">
						<!-- For the user side: someone looking to get a job-->
						<h2>Job Seeking</h2>
						<span class="fa fa-cloud-download"></span>
						<p>Look for a job in the Vancouver film industry in anything from acting to set work to post production. Your profile will be public to casting agents and those looking to hire.</p>
						<a onclick="selectWorkInterest()" class="button button-alt">Looking for a job</a>
					</div>
					<div class="boxB">
						<h2>Casting and Hiring</h2>
						<span class="fa fa-cogs"></span>
						<p>Create casting posts and job posts for both permanent and project-specific positions. You can also post in search of collaborators for a new project.</p>
						<a onclick="selectHireInterest()" class="button button-alt">Looking to hire, collaborate, or cast a role</a>
					</div>
					<div class="boxC">
						<h2> Explore </h2>
						<span class="fa fa-wrench"></span>
						<p> Explore the film industry around you. Check out local events, view projects that are currently being shot in Vancouver, </p>
						<a onclick="selectOtherInterest()" class="button button-alt">Other</a>
					</div>
				</div>
			</div>
		</div>

	{% endif %}


	{% if userAccount %}
		{% if userAccount.profilePicture %}
			<div id="profilePicture">
				<img src="{{ userAccount.profilePicture.url }}" height="150px" width="175px"/>
			</div>
		{% endif %}
	{% endif %}

	{% if next != possibleDestinations.interests %}
		{% if currentPageURL == "/account/edit/picture/" %}
			<form method='post' action="{{ currentPageURL }}" enctype="multipart/form-data">
		{% else %}
			<form method='post' action="{{ currentPageURL }}">
		{% endif %}
			{% csrf_token %}
			{{ form.as_p }}
			<input type="submit" value="{{ nextButtonString }}" />
		</form>
	{% endif %}
	<div id="cancelButton" class="button"></div>

{% endblock %}