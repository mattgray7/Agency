{% extends "base.html" %}

{% block content %}

<h4>
{% if browseView == possibleViews.event %}
	Browse upcoming events...
{% elif browseView == possibleViews.project %}
	Browse projects...
{% elif browseView == possibleViews.collabPost %}
	Browse posts seeking collaborators...
{% elif browseView == possibleViews.workPost %}
	Browse posts seeking crews
{% else %}
	Browse
{% endif %}
</h4>

<div id="eventViewDiv"></div>
<div id="projectViewDiv"></div>
<div id="collabPostViewDiv"></div>
<div id="workPostViewDiv"></div>

<script>
	/*function createBrowseTable(postList, colHeaders){
		if(postList != null){
			var tableHTML = "<table>";

			//create the row for headers
			tableHTML += "<tr>";
			for(var i=0; i < colHeaders.length; i++){
				tableHTML += "<td>" + colHeader[i] + "</td>";
			}
			tableHTML += "</tr>";

			//create all rowse for postList
			for(var i=0; i < postList.length; i++){
				tableHTML += "<tr>";
				//need to iterate over tables, but in the order of colHeaders

			}
		}
	}*/


	function createViewEventTable(){
		var tableString = '';
		{% if events %}
			tableString = '<table>';
			tableString += ("<tr> " +
								"<td> Title </td>" +
								"<td> Posted by </td>" +
								"<td> Date </td>" +
								"<td> Location </td>" +
								"<td> Description </td>" +
							"</tr>");

			//Add each event
			{% for eventObj in events %}
				tableString += ("<tr>" +
									"<td><button onclick='createPostRedirectForm(" + '"{{eventObj.postID}}","{{possibleDestinations.viewPost}}"' + ");'>{{eventObj.title}}</button></td>" +
									"<td>{{eventObj.poster}}</td>" +
									"<td>{{eventObj.date}}</td>" +
									"<td>{{eventObj.location}}</td>" +
									"<td>{{eventObj.description}}</td>" +
								"</tr>");

			{% endfor %}
			tableString += "</table>";
		{% endif %}
		return tableString;
	};


	function createPostRedirectForm(postID, destinationPageName){
		var extraInputs = []
		extraInputs.push({key: "postID", value: postID});

		var form = createPageRedirectForm("{{ next }}", "{{ next }}", destinationPageName, "/browse/", extraInputs);
		form.submit();
	}

	$(document).ready(function(){
		var eventViewDiv = document.getElementById("eventViewDiv");
		if(eventViewDiv != null){
			eventViewDiv.innerHTML = createViewEventTable();
		}
	});
</script>

<!--	{% if events %}
		<table>
			<tr> 
				<td> Title </td>
				<td> Posted by </td>
				<td> Description </td>
			</tr>
		{% for event in events %}
			<tr>
				<td> <a href="/view/event/{{ event.eventID }}/"> {{ event.title }}</a></td>
				<td> <a href="/{{ event.poster }}/"> {{ event.poster }}</a></td>
				<td> {{ event.description }} </td>
			</tr>
		{% endfor %}
	</table>
	{% else %}
		<h4> No events are currently listed.</h4>
	{% endif %}-->

{% endblock %}
