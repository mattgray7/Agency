{% extends "base.html" %}

{% block content %}
<!--{% if request.user.is_authenticated %}
	<script>userLoggedIn = true;</script>
	{% if source == possibleSources.login %}
		<h3> Welcome back {{ request.user.first_name }}!</h3>
	{% endif %}
	<h1>What to do you want to do?</h1>
{% else %}
	<h1>Welcome to The Agency! Let's get started, what are you looking for?</h1>
{% endif %}-->

{% if not request.user.is_authenticated %}
	<div style='position: relative; height: 100%; width: 100%;'>
		<div style='position: absolute; left: 0; right: 0; top: 0;'>
			<!--<img src="{{images.stock}}" style='max-height: 100%; max-width: 100%;'>-->
		</div>
		<div id="banner" class="container">
			<div class="title">
				<h2>Welcome to the VanFilmCollective</h2>
					<span class="byline">A place for filmmakers, both amateur and professional, to connect and create.</span>
			</div>
			<!--<ul class="actions">
				<li><a href="/browse/" class="button">Browse</a></li>
			</ul>-->
		</div>

		<div id="wrapper">
		<div id="three-column" class="container">
			<div class="title">
				<h2>Explore the Vancouver film world.</h2>
				<span class="byline">Check out film work posts, events in your area, and more.</span>
			</div>
			<div class="boxA">
				<!-- For the user side: someone looking to get a job-->
				<span class="fa fa-cloud-download"></span>
				<p>View posts seeking actors, on and off set workers, and collaborators</p>
				<a href="/browse/" class="button button-alt">View posts</a>
			</div>
			<div class="boxB">
				<span class="fa fa-cogs"></span>
				<p>View profiles of registered filmmakers and industry professionals</p>
				<a href="/browse/users/" class="button button-alt">View users</a>
			</div>
			<div class="boxC">
				<span class="fa fa-wrench"></span>
				<p> Create an account and get involved in the VanFilmCollective</p>
				<a href="/account/create/basic/" class="button button-alt">Create account</a>
			</div>
		</div>
	</div>
</div>
{% else %}
	<div id="mainChoice"></div>
{% endif %}


<!--<script>
function getWelcomeMsg(){ 
	console.log("getting welcome msg")
	$.ajax({
		url : "/ajax/getWelcomeMsg/",
		data : {"foo": "bar"},
		type : 'POST',
		dataType: "json",
		success : function(data) {
			console.log(data.response);
		}
	});
}
</script>-->

<script>

var mainChoice = "<button onclick='eventsChosen();' value='Events'>Events</button><br><button onclick='postsChosen();' value='Posts'>Posts</button><br><button onclick='projectsChosen();'> Projects</button><br>";

var createAccountButton = "<button onclick='createAccount()'; value='Create account'>Create account</button>";

var eventChoice = "<button onclick='viewEvents();'> View events in your community</button><br><button onclick='createEventPost();'>Create event</button><br><button onclick='displayMainChoice();'>Back</button>";

var postChoice = "<button onclick='viewPosts();'> View posts</button><br><button onclick='createPost();'>Create post</button><br><button onclick='displayMainChoice();'>Back</button>";

var projectChoice = "<button onclick='viewProjects();'> View current projects</button><br><button onclick='createProject();'>Create project</button><br><button onclick='displayMainChoice();'>Back</button>";

window.onload = displayMainChoice();

function displayMainChoice(){
	{% if request.user.is_authenticated %}
		document.getElementById('mainChoice').innerHTML = mainChoice;
	{% endif %}
	

}

function eventsChosen(){
	document.getElementById('mainChoice').innerHTML = eventChoice;
}

function postsChosen(){
	document.getElementById('mainChoice').innerHTML = postChoice;
}

function projectsChosen(){
	document.getElementById('mainChoice').innerHTML = projectChoice;
}

function viewEvents(){
	window.location = '/browse/events/';
}

function viewPosts(){
	window.location = '/browse/posts/';
}

function viewProjects(){
	window.location = '/browse/projects/';
}

function createAccount(){
	var form = createPageRedirectForm("{{ possibleSources.home }}", "{{ possibleSources.home }}", "{{ possibleSources.createAccount }}", "/");
	form.submit();
}

function createEventPost(){
	//cannot call function createEvent, it is builtin
	var form = createPageRedirectForm("{{ possibleSources.home }}", "{{ possibleSources.home }}", "{{ possibleSources.event }}", "/");
	form.submit();
}

function createPost(){
	var form = createPageRedirectForm("{{ possibleSources.home }}", "{{ possibleSources.home }}", "{{ possibleSources.post }}", "/");
	form.submit();
}

function createProject(){
	var form = createPageRedirectForm("{{ possibleSources.home }}", "{{ possibleSources.home }}", "{{ possibleSources.project }}", "/");
	form.submit();
}




</script>
{% endblock %}