{% extends "base.html" %}

{% block content %}
	{% if profileUserAccount %}
		{% if profileUserAccount.profilePicture %}
			<div id="profilePic">
				<img src="{{ profileUserAccount.profilePicture.url }}" height="150px" width="175px"/>
			</div>
		{% else %}
			<div id="profilePic">
				<img height="150px" width="175px"/>
			</div>
		{% endif %}
		{% if viewingOwnProfile %}
			<form action="{{ currentPageURL }}" method="post">
				{% csrf_token %}
				<input type="hidden" name="source" value="{{ next }}" />
				<input type="hidden" name="current" value="{{ next }}" />
				<input type="hidden" name="destination" value="{{ possibleDestinations.picture }}" /> <!-- return to profile when done -->
				<input type="submit" value="Edit profile picture" />
			</form>
		{% endif %}
		<h1><u> {{ profileUserAccount.firstName }} {{ profileUserAccount.lastName }}</u></h1>

		<!-- Bio -->
		{% if profileUserAccount.bio %}
			<!-- TODO make bio editable on the page with js -->
			{{profileUserAccount.bio}}<br>
		{% endif %}

		<!-- Background -->
		{% if profileUserAccount.reelLink %}
			<a href="{{profileUserAccount.reelLink}}">Reel</a>
		{% endif %}
		{% if profileUserAccount.imdbLink %}
			<a href="{{profileUserAccount.imdbLink}}">IMDB</a>
		{% endif %}

		{% if viewingOwnProfile %}
			<form action="{{ currentPageURL }}" method="post">
				{% csrf_token %}
				<input type="hidden" name="source" value="{{ next }}" />
				<input type="hidden" name="current" value="{{ next }}" />
				<input type="hidden" name="destination" value="{{ possibleDestinations.background }}" /> <!-- return to profile when done -->
				<input type="submit" value="Edit background" />
			</form>
		{% endif %}
		<br>

		<!-- Interests -->
		<h3> {{ profileUserAccount.firstName }} is looking for... </h3>
		<ul>
			{% if profileUserAccount.workInterest %}
				<li>Crew work</li>
			{% endif %}
			{% if profileUserAccount.crewInterest %}
				<li>Production crew members</li>
			{% endif %}
			{% if profileUserAccount.collaborationInterest %}
				<li>Collaborators</li>
			{% endif %}
			{% if profileUserAccount.actingInterest %}
				<li>
					Acting and extra work
					{% if viewingOwnProfile %}
						<form style="display:inline" action="{{ currentPageURL }}" method="post">
							{% csrf_token %}
							<input type="hidden" name="source" value="{{ next }}" />
							<input type="hidden" name="current" value="{{ next }}" />
							<input type="hidden" name="destination" value="{{ possibleDestinations.actorDescription }}" /> 
							{% if profileUserAccount.actorDescriptionEnabled %}
								<input type="submit" value="Edit actor description" />
							{% else %}
								<input type="submit" value="Enable actor descriptions" />
							{% endif %}
						</form>
					{% endif %}
				</li>
			{% endif %}
			{% if profileUserAccount.castingInterest %}
				<li>Actors and extras for a project</li>
			{% endif %}
		</ul>
		{% if viewingOwnProfile %}
			<form action="{{ currentPageURL }}" method="post">
				{% csrf_token %}
				<input type="hidden" name="source" value="{{ next }}" />
				<input type="hidden" name="current" value="{{ next }}" />
				<input type="hidden" name="destination" value="{{ possibleDestinations.interests }}" /> <!-- return to profile when done -->
				<input type="submit" value="Edit profile interests" />
			</form>
		{% endif %}
		<br>

		<!-- Professions -->
		{% if profileProfessions %}
			<h3> {{ profileUserAccount.firstName }}'s interested professions include...</h3>
			<ul>
				{% for profession in profileProfessions %}
					<li>{{ profession }}</li>
				{% endfor %}
			</ul>
		{% else %}
			<h3> {{ profileUserAccount.firstName }} has not specified his interested professions </h3>
		{% endif %}
		{% if viewingOwnProfile %}
			<form action="{{ currentPageURL }}" method="post">
				{% csrf_token %}
				<input type="hidden" name="source" value="{{ next }}" />
				<input type="hidden" name="current" value="{{ next }}" />
				<input type="hidden" name="destination" value="{{ possibleDestinations.professions }}" /> <!-- return to profile when done -->
				<input type="submit" value="Edit professions" />
			</form>
		{% endif %}

		<!-- Events -->
		{% if profileEvents %}
			<br><h3>Events {{ profileUserAccount.firstName }} has posted...</h3>
				{% for event in profileEvents %}
					<form method="post" action="{{ currentPageURL }}"> 
						{% csrf_token %}
						<input type="hidden" name="eventID" value="{{event.eventID}}" />
						<input type="hidden" name="source" value="{{ next }}" />
						<input type="hidden" name="next" value="{{ next }}" />
						<input type="hidden" name="destination" value="{{ possibleDestinations.viewEvent }}" />
						<input type="submit" Value="{{ event.title }}" />
					</form>
				{% endfor %}
		{% endif %}


		<!-- Posts -->
		{% if profilePosts %}
			{% if profilePosts.events %}
		    	<br>
		    	<h3>Events {{ profileUserAccount.firstName }} has posted...</h3>
				{% for event in profilePosts.events %}
					<form method="post" action="{{ currentPageURL }}"> 
						{% csrf_token %}
						<input type="hidden" name="postID" value="{{event.postID}}" />
						<input type="hidden" name="source" value="{{ next }}" />
						<input type="hidden" name="next" value="{{ next }}" />
						<input type="hidden" name="destination" value="{{ possibleDestinations.viewPost }}" />
						<input type="submit" Value="{{ event.title }}" />
					</form>
				{% endfor %}
			{% endif %}
			{% if profilePosts.projects %}
				<br>
				<h3>Projects {{ userAccount.firstName }} is involved in...</h3>
				{% for projectPost in profilePosts.projects %}
					<form method="post" action="{{ currentPageURL }}"> 
						{% csrf_token %}
						<input type="hidden" name="postID" value="{{projectPost.postID}}" />
						<input type="hidden" name="source" value="{{ next }}" />
						<input type="hidden" name="next" value="{{ next }}" />
						<input type="hidden" name="destination" value="{{ possibleDestinations.viewPost }}" />
						<input type="submit" Value="{{ projectPost.title }}" />
					</form>
				{% endfor %}
			{% endif %}
			{% if profilePosts.collaboration %}
				<br>
				<h3>Seeking collaborators posts...</h3>
				{% for collabPost in profilePosts.collaboration %}
					<form method="post" action="{{ currentPageURL }}"> 
						{% csrf_token %}
						<input type="hidden" name="postID" value="{{collabPost.postID}}" />
						<input type="hidden" name="source" value="{{ next }}" />
						<input type="hidden" name="next" value="{{ next }}" />
						<input type="hidden" name="destination" value="{{ possibleDestinations.viewPost }}" />
						<input type="submit" Value="{{ collabPost.title }}" />
					</form>
				{% endfor %}
			{% endif %}
			{% if profilePosts.work %}
				<br>
				<h3>Seeking crew posts...</h3>
				{% for workPost in profilePosts.work %}
					<form method="post" action="{{ currentPageURL }}"> 
						{% csrf_token %}
						<input type="hidden" name="postID" value="{{workPost.postID}}" />
						<input type="hidden" name="source" value="{{ next }}" />
						<input type="hidden" name="next" value="{{ next }}" />
						<input type="hidden" name="destination" value="{{ possibleDestinations.viewPost }}" />
						<input type="submit" Value="{{ workPost.title }}" />
					</form>
				{% endfor %}	
			{% endif %}
			{% if profilePosts.casting %}
				<br>
				<h3>Seeking actor posts...</h3>
				{% for castingPost in profilePosts.casting %}
					<form method="post" action="{{ currentPageURL }}">
						{% csrf_token %}
						<input type="hidden" name="postID" value="{{castingPost.postID}}" />
						<input type="hidden" name="source" value="{{ next }}" />
						<input type="hidden" name="next" value="{{ next }}" />
						<input type="hidden" name="destination" value="{{ possibleDestinations.viewPost }}" />
						<input type="submit" Value="{{ castingPost.title }}" />
					</form>
				{% endfor %}
			{% endif %}
		{% endif %}	
	{% else %}
		No user with name {{ profileUsername }} found.
	{% endif %}

{% endblock %}
